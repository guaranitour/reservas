:root{ 
 --bg:#f7f9fc; --card:#ffffff; --text:#1f2937; --muted:#6b7280; 
 --primary:#2c7be5; --success:#10b981; --shadow:0 8px 20px rgba(17,24,39,.08); 
 --brandA: rgba(44,123,229,.10); --brandB: rgba(16,185,129,.08); 
 --logo-w-ideal: 84vw; --logo-w-max: 360px; 
 --safe-bottom: env(safe-area-inset-bottom, 0px); 
 --safe-top: env(safe-area-inset-top, 0px); 
 --safe-right: env(safe-area-inset-right, 0px); 
 --action-bar-h: 72px; 
 --staff-bg:#fef3c7; --staff-border:#fde68a; --staff-text:#92400e; 
}
html,body{height:100%;}
html{ scroll-padding-bottom: calc(var(--action-bar-h) + var(--safe-bottom)); }
body{ 
 margin:0; font-family: system-ui,-apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; 
 color:var(--text); background:var(--bg); overflow-x:hidden; 
}
*, *::before, *::after{ box-sizing:border-box; }
/* ===== Header ===== */
.hero{ 
 width:100%; 
 background: linear-gradient(180deg, var(--brandA) 0%, var(--brandB) 45%, rgba(255,255,255,0) 100%); 
 padding:clamp(12px,4vw,24px); display:grid; place-items:center; 
 min-height: clamp(110px, 24vw, 210px); 
}
.brand-chip{ 
 position:relative; 
 display:inline-flex; align-items:center; justify-content:center; 
 padding:clamp(8px,2.4vw,16px) clamp(12px,3vw,20px); 
 border-radius:16px; background: rgba(255,255,255,.55); 
 border:1px solid rgba(255,255,255,.65); box-shadow:0 8px 24px rgba(17,24,39,.12); 
 max-width:92vw; 
 overflow: visible; 
}
.logo-skeleton{ 
 width: min(var(--logo-w-ideal), var(--logo-w-max)); 
 height: clamp(64px, 18vw, 140px); 
 border-radius:12px; 
 background: linear-gradient(90deg, #eef2ff 0%, #f7f9fc 40%, #eef2ff 80%); 
 background-size: 200% 100%; 
 animation: shimmer 1.2s ease-in-out infinite; 
}
@keyframes shimmer{ 0%{background-position: 0% 0;} 100%{background-position: 200% 0;} }
.brand-chip img{ 
 width: min(var(--logo-w-ideal), var(--logo-w-max)); 
 max-width:100%; height:auto; display:block; object-fit:contain; margin:0 auto; 
 filter: drop-shadow(0 3px 8px rgba(17,24,39,.14)); 
 opacity:0; transition: opacity .25s ease; 
 cursor: pointer; 
}
.brand-chip img.ready{ opacity:1; }
/* ===== Admin Menu (dropdown) ===== */
.admin-menu{ 
 position: absolute; 
 top: calc(100% + 10px); 
 left: 50%; 
 transform: translateX(-50%); 
 width: min(92vw, 360px); 
 padding: 12px; 
 border-radius: 14px; 
 background: rgba(255,255,255,.95); 
 border: 1px solid rgba(17,24,39,.08); 
 box-shadow: 0 12px 28px rgba(17,24,39,.16); 
 backdrop-filter: saturate(120%) blur(6px); 
 z-index: 40; 
}
.admin-menu::before{ 
 content:""; 
 position:absolute; 
 top:-8px; left:50%; transform:translateX(-50%); 
 width:0; height:0; 
 border-left:8px solid transparent; 
 border-right:8px solid transparent; 
 border-bottom:8px solid rgba(255,255,255,.95); 
 filter: drop-shadow(0 -1px 0 rgba(17,24,39,.08)); 
}
.admin-title{ 
 margin:0 0 8px 0; font-weight:800; font-size:.95rem; color:var(--text); text-align:center; 
}
.btn-admin{ width:100%; }
/* Contenedor principal */
.app{padding:clamp(12px,3vw,20px);} 
.view{display:none;} 
.view.active{display:block; animation:fadeIn .4s ease both;} 
@keyframes fadeIn{from{opacity:0; transform:translateY(6px);} to{opacity:1; transform:none;}}
/* Inicio + cards (solo para convencional) */
.home-center{min-height:calc(100dvh - 160px); display:grid; place-items:center;}
.cards{display:grid; grid-template-columns:1fr; gap:14px; max-width:480px; width:100%;}
.card{ 
 background:var(--card); border-radius:14px; box-shadow:var(--shadow); 
 padding:18px; display:flex; flex-direction:column; gap:8px; 
 cursor:pointer; transition:transform .15s ease, box-shadow .2s ease; text-align:center; 
}
.card:hover{transform:translateY(-2px); box-shadow:0 10px 24px rgba(17,24,39,.12);} 
.card h2{margin:0; font-size:1.15rem;}
.card p{margin:0; color:var(--muted);} 
.view-title{ 
 margin:0 0 16px 0; 
 font-size:1rem; 
 line-height:1.25; 
 font-weight:800; 
 letter-spacing:.2px; 
 color:var(--text); 
 text-align:center; 
}
/* Formularios */
.form{background:var(--card); border-radius:14px; box-shadow:var(--shadow); padding:16px; margin-bottom:12px;}
.form-row{display:flex; flex-direction:column; gap:6px; margin-bottom:10px;}
label{font-weight:600;}
input{border:1px solid #e5e7eb; border-radius:10px; padding:12px; font-size:1rem; background:#fff; color:var(--text);} 
.actions{display:flex; gap:8px; flex-wrap:wrap;}
.btn{border:none; border-radius:10px; padding:12px 14px; font-weight:600; cursor:pointer; min-height:44px;}
.btn.primary{background:var(--primary); color:white;}
.btn.ghost{background:transparent; border:1px solid #e5e7eb; color:var(--text);} 
.btn.success{background:var(--success); color:white;}
.btn.danger{background:#ef4444; color:white;}
/* Legend / chips */
.legend{display:flex; gap:8px; margin:8px 0 12px; flex-wrap:wrap;}
.badge{display:inline-flex; align-items:center; gap:6px; border-radius:999px; padding:6px 10px; font-size:.875rem;}
.badge.libre{background:#d1fae5; color:#065f46;}
.badge.ocupado{background:#fee2e2; color:#7f1d1d;}
.badge.seleccionado{background:#dbeafe; color:#1e40af;}
.badge.inexistente,.badge.inhabilitado{background:#e5e7eb; color:#374151;}
/* Croquis 2+2 */
.grid{display:flex; flex-direction:column; gap:8px;}
.row{ display:grid; grid-template-columns:minmax(0,1fr) 20px minmax(0,1fr); gap:8px; align-items:center; width:100%; }
.block{display:grid; grid-template-columns:repeat(2, 1fr); gap:8px;}
.aisle{width:20px; height:20px;}
.seat{ 
 border:none; border-radius:12px; padding:12px; font-weight:700; box-shadow:var(--shadow); 
 transition:transform .1s ease, box-shadow .2s ease, background .2s ease, color .2s ease; 
 width:100%; position:relative; overflow:hidden; min-height:48px; 
}
.seat.libre{background:#e6fffa; color:#0f766e;}
.seat.ocupado{background:#fee2e2; color:#7f1d1d; cursor:not-allowed;} /* público */
.seat.seleccionado{background:#dbeafe; color:#1e40af; transform:scale(1.02);} 
.seat.inhabilitado{background:#f3f4f6; color:#6b7280; cursor:not-allowed; opacity:.9;}
.seat.inexistente{background:#f3f4f6; color:#6b7280; cursor:not-allowed; opacity:.9;}
.seat-placeholder{width:100%; min-height:48px; border-radius:12px; background:transparent; box-shadow:none; border:none; pointer-events:none;}
.seat:active{transform:scale(0.98);} 
/* Resaltado (Mirá tu asiento) */
.seat.mine{ outline:3px solid #6366f1; box-shadow:0 0 0 3px rgba(99,102,241,.15) inset; }
.seat.mine::after{ content:""; position:absolute; inset:0; border-radius:12px; box-shadow:0 0 0 0 rgba(99,102,241,.25); animation:pulse 1.8s ease-in-out infinite; }
@keyframes pulse{ 0%{box-shadow:0 0 0 0 rgba(99,102,241,.25);} 70%{box-shadow:0 0 0 10px rgba(99,102,241,0);} 100%{box-shadow:0 0 0 0 rgba(99,102,241,0);} }
.nums{display:flex; gap:10px; flex-wrap:wrap;}
.nums .pill{background:#eef2ff; color:#1e3a8a; border-radius:999px; padding:6px 10px; font-weight:700; display:inline-flex;}
/* Espaciamiento */
#findFeedback .actions, 
#multiFeedback .actions { margin-top:14px; margin-bottom:18px; }
#grid-find, 
#multiCroquis { margin-top:16px; }
/* Asignación múltiple */
.assign{ margin-top: 12px; padding-bottom: calc(var(--action-bar-h) + var(--safe-bottom)); }
.assign-list{ display:flex; flex-direction:column; gap:16px; }
.assign-row{ 
 background:var(--card); border-radius:12px; box-shadow:var(--shadow); 
 padding:16px; display:grid; gap:10px; scroll-margin-bottom:12px; 
}
.assign-title{ font-size:1rem; font-weight:800; color:var(--text); }
.assign-grid{ display:grid; grid-template-columns:1fr; gap:10px; }
@media (min-width:560px){ .assign-grid{ grid-template-columns:1fr 1fr; } }
.field{ display:flex; flex-direction:column; gap:6px; }
.field-label{ font-weight:600; font-size:.9rem; color:#6b7280; }
/* Bottom App Bar */
.assign .action-bar{ 
 position: fixed; left: 0; right: 0; bottom: 0; z-index: 30; 
 height: calc(var(--action-bar-h) + var(--safe-bottom)); 
 display: grid; place-items: center; 
 background: transparent; border: none; box-shadow: none; 
 pointer-events: none; 
}
.assign .action-bar .actions{ 
 width: min(680px, 92vw); display:flex; gap:10px; 
 padding: 0 12px var(--safe-bottom) 12px; pointer-events: auto; 
}
.assign .action-bar .btn{ flex: 1; min-height: 44px; }
/* Control interno */
.control-board{background:var(--card); border-radius:14px; box-shadow:var(--shadow); padding:16px 12px; margin-top:12px;}
.control-title{margin:0 0 12px 0; font-size:1.1rem; font-weight:700;}
.control-toolbar{ 
 position: sticky; top: 8px; z-index: 20; display:flex; flex-direction:column; gap:10px; 
 padding:12px; border-radius:14px; background: rgba(255,255,255,.72); 
 border:1px solid rgba(255,255,255,.80); box-shadow:0 8px 24px rgba(17,24,39,.10); 
 transition: transform .25s ease, box-shadow .25s ease, background .25s ease; margin-bottom: 20px; 
}
.control-toolbar.scrolled{ transform: translateY(2px); box-shadow:0 12px 28px rgba(17,24,39,.16); background: rgba(255,255,255,.82); }
.control-actions{display:flex; gap:8px; flex-wrap:wrap;}
.sel-tags{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
.sel-tags .tag{border-radius:999px; padding:6px 10px; font-weight:700; background:#e5e7eb; color:#374151;}
.sel-tags .tag.src{background:#fef3c7; color:#92400e;}
.sel-tags .tag.dst{background:#dbeafe; color:#1e40af;}
.edit-actions{display:none; gap:8px; flex-wrap:wrap;}
.control-toolbar.editing .edit-actions{display:flex;}
/* Snackbar & Overlay */
.snackbar{position:fixed; left:50%; bottom:20px; transform:translateX(-50%); background:#111827; color:#fff; padding:12px 16px; border-radius:12px; box-shadow:var(--shadow); opacity:0; pointer-events:none;}
.snackbar.show{opacity:1; transition:opacity .2s ease;}
.overlay{position:fixed; inset:0; background:rgba(17,24,39,.28); display:grid; place-items:center; opacity:0; pointer-events:none; transition:opacity .15s ease;}
.overlay.show{opacity:1; pointer-events:auto;}
.loader{background:var(--card); border-radius:14px; box-shadow:var(--shadow); padding:16px 18px; display:flex; align-items:center; gap:12px;}
.spinner{width:20px; height:20px; border-radius:50%; border:3px solid #c7d2fe; border-top-color:#3b82f6; animation:spin .9s linear infinite;}
@keyframes spin { to { transform: rotate(360deg); } }
.loader-text{font-weight:600; color:#111827;}
@media (prefers-reduced-motion: reduce){ .view.active{animation:none} .spinner{animation:none} }
.hidden{display:none !important;}
/* Croquis Control: número + primer nombre (SINGLE) */
#controlCroquis .seat{ display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:56px; }
#controlCroquis .seat .num{ font-size: 1rem; line-height: 1; font-weight: 800; }
#controlCroquis .seat .occ-name{ margin-top:4px; font-size:.75rem; line-height:1.1; font-weight:600; color:#374151; letter-spacing:.2px; max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
#controlCroquis .seat.ocupado .occ-name{ color:#7f1d1d; }
/* Croquis Control: número + primer nombre (MULTI - ambas plantas) */
#controlCroquisMulti .seat{ display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:56px; }
#controlCroquisMulti .seat .num{ font-size: 1rem; line-height: 1; font-weight: 800; }
#controlCroquisMulti .seat .occ-name{ margin-top:4px; font-size:.75rem; line-height:1.1; font-weight:600; color:#374151; letter-spacing:.2px; max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
#controlCroquisMulti .seat.ocupado .occ-name{ color:#7f1d1d; }
/* Elegir viaje / planta */
.trip-list{ display:grid; grid-template-columns:1fr; gap:12px; max-width:560px; margin:0 auto; }
.trip-card{ background:var(--card); border-radius:14px; box-shadow:var(--shadow); padding:16px; display:flex; flex-direction:column; gap:6px; cursor:pointer; }
.trip-card h3{ margin:0; font-size:1rem; }
.trip-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.trip-pill{ display:inline-flex; align-items:center; gap:6px; border-radius:999px; padding:4px 8px; font-size:.8rem; background:#eef2ff; color:#1e3a8a; }
.floors{ display:grid; grid-template-columns:1fr; gap:12px; max-width:560px; margin:12px auto 0; }
@media (min-width:520px){ .floors{ grid-template-columns:1fr 1fr; } }
.floors .card h2{ font-size:1rem; }
.trip-tags{ display:flex; gap:8px; flex-wrap:wrap; margin:8px 0; }
.trip-tags .tag{ border-radius:999px; padding:6px 10px; font-weight:700; background:#e5e7eb; color:#374151; }
/* Staff Badge */
.staff-badge{ 
 position: fixed; 
 top: calc(12px + var(--safe-top)); 
 right: calc(12px + var(--safe-right)); 
 z-index: 50; 
 display: inline-flex; 
 align-items: center; 
 gap: 6px; 
 padding: 6px 12px; 
 border-radius: 999px; 
 font-weight: 800; 
 font-size: .85rem; 
 background: var(--staff-bg); 
 color: var(--staff-text); 
 border: 1px solid var(--staff-border); 
 box-shadow: var(--shadow); 
}
/* ===== Staff: expansión (tooltip flotante) ===== */
#controlCroquis .seat.ocupado, 
#controlCroquisMulti .seat.ocupado { 
 cursor: pointer; /* en Staff, ocupados son clickeables */
}
.seat .occ-full { display:none; } /* lo usamos sólo como fuente del texto */
.seat-tooltip { 
 position: fixed; 
 left: 0; top: 0; 
 transform: translate(-50%, -8px); 
 background: #fff; 
 border: 1px solid rgba(17,24,39,.12); 
 border-radius: 10px; 
 padding: 8px 12px; 
 box-shadow: var(--shadow); 
 max-width: min(92vw, 420px); 
 white-space: nowrap; 
 font-weight: 700; 
 font-size: .9rem; 
 color: #111827; 
 opacity: 0; 
 pointer-events: none; 
 transition: opacity .18s ease, transform .18s ease; 
 z-index: 1000; 
}
.seat-tooltip.show { 
 opacity: 1; 
 pointer-events: auto; 
 transform: translate(-50%, -12px); 
}
.seat-tooltip .meta { margin-top: 4px; font-weight: 600; font-size: .8rem; color: #6b7280; }
/* FIX Google Sign-In iframe sobre logo */
#googleSignIn { 
 position: relative; 
 z-index: 1; 
}
#heroLogo { 
 position: relative; 
 z-index: 2; 
}
/* ===== Modal (mobile clean) ===== */
.modal{ position: fixed; inset: 0; z-index: 60; display: none; }
.modal.show{ display: grid; }
.modal .backdrop{ position: absolute; inset: 0; background: rgba(17,24,39,.40); }
.modal .sheet{ position: relative; margin: auto; width: min(640px, 92vw); background: var(--card); border-radius: 18px; box-shadow: 0 18px 40px rgba(17,24,39,.18); padding: 16px; max-height: calc(var(--vh, 1vh) * 84); display:flex; flex-direction:column; margin-top:12px; margin-bottom:calc(env(safe-area-inset-bottom) + 12px); }
.modal .sheet header{ display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 10px; }
.modal .sheet header h3{ margin: 0; font-size: 1.05rem; font-weight: 900; }
.modal .close{ border: none; background: transparent; cursor: pointer; font-weight: 800; color: #6b7280; }
.form, .assign-row{ border-radius: 16px; background: rgba(255,255,255,.96); box-shadow: 0 8px 24px rgba(17,24,39,.10); padding: 14px; margin-bottom: 12px; }
.assign-title{ font-size: .98rem; font-weight: 800; color: #111827; margin: 0 0 10px 0; }
.field{ display: flex; flex-direction: column; gap: 6px; }
.field .field-label{ font-size: .9rem; font-weight: 700; color: #374151; display:block; margin-bottom:6px; line-height:1.2; }
.field input{ width: 100%; border: 1.5px solid #e5e7eb; border-radius: 999px; padding: 14px 16px; font-size: 1rem; background: #fff; color: var(--text); outline: none; transition: border-color .15s ease, box-shadow .15s ease; line-height:1.3; }
.field input:focus{ border-color: #93c5fd; box-shadow: 0 0 0 4px rgba(59,130,246,.15); }
.field input::placeholder{ color: #9ca3af; opacity: .9; }
.modal .sheet .actions{ display: flex; gap: 10px; justify-content: space-between; }
.modal .sheet .btn{ border-radius: 999px; min-height: 44px; }
@media (min-width: 540px){ .assign-grid{ display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }}
/* ===== Bottom App Bar: Selección (flotante, sin fondo) ===== */
.select-action-bar{ position: fixed; left: 0; right: 0; bottom: 0; z-index: 40; height: calc(var(--action-bar-h) + var(--safe-bottom)); display: grid; place-items: center; background: transparent; border: none; box-shadow: none; pointer-events: none; }
.select-action-bar .actions{ width: min(560px, 92vw); display: flex; gap: 10px; justify-content: center; padding: 0 12px var(--safe-bottom) 12px; pointer-events: auto; background: transparent; border: none; box-shadow: none; }
.select-action-bar .btn{ min-height: 44px; border-radius: 999px; }
#view-select{ padding-bottom: calc(var(--action-bar-h) + var(--safe-bottom)); }
.select-action-bar.scrolled{ background: transparent; border-top: none; box-shadow: none; }
.select-action-bar.scrolled .btn.primary{ box-shadow: 0 6px 18px rgba(44,123,229,.28); }
.select-action-bar.scrolled .btn.ghost{ box-shadow: 0 6px 18px rgba(17,24,39,.12); }
/* === Campos en dos columnas (responsive) === */
.form-grid{display:grid; grid-template-columns:1fr; gap:10px;}
@media(min-width:520px){.form-grid.two{grid-template-columns:1fr 1fr;}}
/* ===== Keyboard-safe modal (v7) ===== */
.modal.show{ overflow:auto; align-items:flex-start; }
#reserveBody{ flex:1 1 auto; overflow:auto; max-height: calc(var(--vh, 1vh) * 84 - 160px); padding-right:4px; }
.modal .sheet .actions{ position: sticky; bottom: 0; background: rgba(255,255,255,.96); padding-top: 8px; }
.assign-list{ max-height: inherit; }
#confirmedModal .sheet header h3{ text-align:center; width:100%; }
#confirmedModal .sheet header{ justify-content:center; }
#confirmedModal .sheet .actions{ justify-content:center; }
/* ===== Fix definitivo: modal SINGLE - evitar solapado label/placeholder ===== */
#reserveModal .field { gap: 8px; }
#reserveModal .field-label { line-height: 1.2; }
#reserveModal .field input::placeholder { opacity: 0; }
#reserveModal .field input:focus::placeholder { opacity: 0; }
/* ===== Ajuste fino: modal SINGLE - separación extra para CI ===== */
#reserveModal .field + .field { margin-top: 14px; }
#reserveModal .field input { min-height: 54px; }
/* === Público: Action bar siempre visible y segura === */
.select-action-bar { pointer-events: none; }
.select-action-bar .actions { pointer-events: auto; padding-bottom: calc(var(--safe-bottom) + 10px); }
#view-select { padding-bottom: calc(var(--action-bar-h) + var(--safe-bottom) + 12px); }
/* Ocultar barra pública cuando hay modal activo */
.select-action-bar.hidden { opacity: 0; pointer-events: none; transform: translateY(8px); transition: opacity .2s ease, transform .2s ease; }
/* === Fin de estilos extraídos del HTML original === */
/* ==== Bottom App Bar: colocar Actualizar a la izquierda y Reservar a la derecha ==== */
.select-action-bar .actions { 
 justify-content: space-between; /* separa a los extremos */
}
#btnRefreshPersistent { order: 1; } /* izquierda */
#btnReservePersistent { order: 2; } /* derecha */
/* Que ambos crezcan parejo en mobile para mejor toque */
.select-action-bar .btn { flex: 1; }
/* Si preferís que en pantallas anchas no ocupen todo, descomentá:
@media (min-width: 560px) { 
 .select-action-bar .btn { flex: 0 0 auto; }
}
*/
/* ==== Contador de asientos seleccionados (badge) ==== */
.btn.with-counter { 
 position: relative; 
 padding-right: 42px; /* deja espacio para el badge */
}
.btn-counter { 
 position: absolute; 
 top: 50%; 
 right: 12px; 
 transform: translateY(-50%); 
 min-width: 24px; 
 height: 24px; 
 padding: 0 6px; 
 border-radius: 999px; 
 background: #ef4444; /* rojo llamativo */
 color: #fff; 
 font-weight: 900; 
 font-size: .82rem; 
 display: inline-flex; 
 align-items: center; 
 justify-content: center; 
 box-shadow: 0 6px 16px rgba(239,68,68,.25); 
}
.btn-counter.hidden { 
 display: none !important; 
}
/* Accesibilidad: cuando el badge cambia, que los lectores lo anuncien */
#selectedCounterLive { 
 position: absolute; 
 width: 1px; height: 1px; overflow: hidden; 
 clip: rect(1px,1px,1px,1px); 
 white-space: nowrap; 
}
/* ===== NUEVO: estilos para opciones tipo de croquis ===== */
.radio-group{ display:flex; gap:10px; flex-wrap:wrap; }
.radio-pill{ display:inline-flex; align-items:center; gap:6px; border:1px solid #e5e7eb; padding:8px 12px; border-radius:999px; cursor:pointer; }
.radio-pill input{ accent-color: var(--primary); }


/* === NUEVO: botón ámbar y select para modal de edición === */
.btn.warning{background:#f59e0b; color:white;}
select{border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; background:#fff; color:var(--text);}
